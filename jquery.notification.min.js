/*
 *  Project: JNP - jQuery Notification Plugin for Twitter Bootstrap
 *  Description: A notification messages for use with twitter bootstrap
 *  Author: Fabian Torres
 *  Version: 2.1.0
 *  License: The MIT License (MIT)
 *
 * Copyright (c) <2013> <copyright Fabian Torres>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT O ROTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
!function($,window,document,undefined){$.jnp=function(element,options){var defaults={bootstrap:"true",background:"#666",opacity:.8,css:false,clickOn:null,contextual:"warning",position:"wrapper",time:0,duration:0,title:null,message:"Notification message here!",inmediatly:true,height:null,width:null,closeBtn:true,id:null,prefix:"jnp"};var jnp=this;jnp.options={};var init=function(element,options){jnp.element=element?element:"body";jnp.$el=$(jnp.element);jnp.options=$.fn.extend(true,{},defaults,options);jnp._defaults=defaults;setOptions();draw();if(jnp.options.inmediatly){render()}if(jnp.options.clickOn){renderLater()}};jnp.setTitle=function(title){jnp.options.title=typeof title=="string"?title:null;if(!jnp.$html.child.title.is(":visible"))jnp.$html.child.title.show();jnp.$html.child.title.text(jnp.options.title)};jnp.setMessage=function(message){jnp.options.message=message;jnp.$html.child.message.html(jnp.options.message)};jnp.setContent=function(title,message){jnp.options.title=typeof title=="string"?title:null;jnp.options.message=message;if(!jnp.$html.child.title.is(":visible"))jnp.$html.child.title.show();jnp.$html.child.title.text(jnp.options.title);jnp.$html.child.message.html(jnp.options.message)};jnp.setWrapperCSS=function(css){jnp.$html.container.css(css)};jnp.setBackground=function(color){jnp.options.background=typeof color=="string"?color:jnp.options.background;jnp.$overlay.css({background:jnp.options.background})};jnp.setOpacity=function(opacity){jnp.options.opacity=typeof opacity=="number"?parseFloat(opacity):jnp.options.opacity;jnp.$overlay.css({opacity:jnp.options.opacity})};jnp.close=function(){jnp.$container.hide()};jnp.show=function(){jnp.$container.show()};jnp.render=function(){if(!jnp.options.inmediatly){render()}else{jnp.show()}};jnp.destroy=function(){jnp.$container.remove()};var setOptions=function(){jnp._css=typeof jnp.options.prefix=="string"?jnp.options.prefix.toLowerCase():"jnp";jnp.options.bootstrap=setToBoolean(jnp.options.bootstrap);jnp.options.css=setToBoolean(jnp.options.css);jnp.options.inmediatly=setToBoolean(jnp.options.inmediatly);jnp.options.contextual=jnp.options.contextual.toLowerCase();jnp.options.contextual=$.inArray(jnp.options.contextual,["warning","success","danger","info"])?jnp.options.contextual:"warning";jnp.options.position=jnp.options.position.toLowerCase();jnp.options.position=$.inArray(jnp.options.position,["wrapper","top","bottom","fancy"])?jnp.options.position:"wrapper";jnp.options.opacity=parseFloat(jnp.options.opacity);jnp.options.duration=parseFloat(jnp.options.duration)*1e3;jnp.options.time=parseFloat(jnp.options.time)*1e3;jnp.options.title=typeof jnp.options.title=="string"?capitaliseFirstLetter(jnp.options.title):null;jnp.options.height=typeof jnp.options.height=="number"||typeof jnp.options.height=="string"?parseFloat(jnp.options.height):"auto";jnp.options.width=typeof jnp.options.width=="number"||typeof jnp.options.width=="string"?parseFloat(jnp.options.width):"auto";jnp.options.closeBtn=setToBoolean(jnp.options.closeBtn);if(jnp.options.time>0)jnp.options.inmediatly=false;jnp.options.id=typeof jnp.options.id=="string"?jnp.options.id:null;if(jnp.options.id!=null&&jnp.options.id==jnp.$el.attr("id"))jnp.options.id+="-"+jnp._css};var setToBoolean=function(value){return value==true||typeof value=="string"&&value.toLowerCase()=="true"||value=="1"||value==1?true:false};var capitaliseFirstLetter=function(string){return string.charAt(0).toUpperCase()+string.slice(1)};var draw=function(){if(jnp.element=="body"){jnp.$el=$("<div />").addClass(jnp._css+"-virtual-element");$("body").prepend(jnp.$el)}jnp.$container=$("<div />").addClass(jnp._css+"-container");jnp.options.bootstrap?buildBootstrap():buildDOM();if(!jnp.options.bootstrap&&!jnp.options.css)addStyles();setPlace();drawOverlay();jnp.$container.hide()};var drawOverlay=function(){jnp.$overlay=$("<div />").addClass(jnp._css+"-overlay");jnp.$overlay.css({position:"absolute","z-index":"999998",left:0,top:jnp.options.position=="bottom"?"auto":0,bottom:jnp.options.position=="bottom"?0:"auto"});if(!jnp.options.css){jnp.$overlay.css({height:jnp.options.position=="fancy"?"100%":jnp.$wrapper.height(),padding:jnp.options.position=="fancy"?0:"10px 0px","-webkit-box-sizing":"content-box","-moz-box-sizing":"content-box","box-sizing":"content-box",width:"100%","background-color":jnp.options.background,opacity:jnp.options.opacity})}jnp.$container.prepend(jnp.$overlay);if(jnp.options.position=="wrapper")jnp.$overlay.hide()};var setEvents=function(){if(jnp.$overlay){jnp.$overlay.on({click:function(){jnp.$container.fadeOut("slow",function(){jnp.$container.hide()})}});if(jnp.options.closeBtn){jnp.$html.child.close.on({click:function(){jnp.$container.fadeOut("slow",function(){jnp.$container.hide()})}})}}if(jnp.options.duration>0){var interval=window.setInterval(function(){jnp.$container.hide();window.clearInterval(interval)},jnp.options.duration)}};var setPlace=function(){jnp.$wrapper=$("<div />").addClass(jnp._css+"-wrapper-position");if(jnp.options.css)jnp.$container.addClass(jnp._css+"-custom");if(jnp.options.id!=null)jnp.$container.attr("id",jnp.options.id);switch(jnp.options.position){case"top":jnp.$wrapper.css({position:"absolute","z-index":"999999",top:10,height:jnp.options.height,width:jnp.options.width});jnp.$html.container.css({margin:0});$("body").prepend(jnp.$container);jnp.$container.append(jnp.$wrapper);jnp.$wrapper.prepend(jnp.$el);jnp.$wrapper.css({left:(window.innerWidth-jnp.$el.outerWidth())/2});break;case"bottom":jnp.$wrapper.css({position:"absolute","z-index":"999998",bottom:10,"margin-bottom":0,height:jnp.options.height,width:jnp.options.width});jnp.$html.container.css({margin:0});$("body").prepend(jnp.$container);jnp.$container.append(jnp.$wrapper);jnp.$wrapper.prepend(jnp.$el);jnp.$wrapper.css({left:(window.document.width-jnp.$el.outerWidth())/2});break;case"fancy":jnp.$wrapper.height(jnp.options.height).width(jnp.options.width);$("body").prepend(jnp.$container);jnp.$container.append(jnp.$wrapper);jnp.$wrapper.prepend(jnp.$el);jnp.$wrapper.css({position:"absolute","z-index":"999999",height:jnp.options.height,width:jnp.options.width});jnp.$wrapper.css({top:(window.innerHeight-jnp.$wrapper.outerHeight())/2,left:(window.innerWidth-jnp.$wrapper.outerWidth())/2});break;default:jnp.$wrapper.css({position:"relative","z-index":"999999","-webkit-box-sizing":"content-box","-moz-box-sizing":"content-box","box-sizing":"content-box"});if(jnp.$el.siblings().length>1&&jnp.$el.index()>0){var pos=jnp.$el.index()-1;jnp.$el.siblings().eq(pos).after(jnp.$container);jnp.$container.append(jnp.$wrapper);jnp.$wrapper.prepend(jnp.$el)}else{jnp.$el.parent().prepend(jnp.$container);jnp.$container.append(jnp.$wrapper);jnp.$wrapper.append(jnp.$el)}if(jnp.options.height!="auto"){jnp.$html.container.height(jnp.options.height)}if(jnp.options.width!="auto"){jnp.$html.container.width(jnp.options.width)}break}};var buildBootstrap=function(){var contextual="alert";if(jnp.options.contextual!="warning")contextual+=" alert-"+jnp.options.contextual;jnp.$html={container:$("<div />").addClass(jnp._css+"-wrapper").addClass(contextual).addClass("alert-block"),child:{close:$("<button />").addClass("close").attr("button","button"),title:$("<h4 />"),message:$("<span />").addClass(jnp._css+"-message")}};jnp.$el.prepend(jnp.$html.container);if(jnp.options.closeBtn){jnp.$html.child.close.html("&times;");jnp.$html.container.append(jnp.$html.child.close)}if(jnp.options.title!=null&&jnp.options.title!=""){jnp.$html.child.title.append(jnp.options.title)}else{jnp.$html.child.title.hide()}jnp.$html.container.append(jnp.$html.child.title);jnp.$html.child.message.append(jnp.options.message);jnp.$html.container.append(jnp.$html.child.message)};var buildDOM=function(){jnp.$html={container:$("<div />").addClass(jnp._css+"-wrapper"),child:{close:$("<div />").addClass(jnp._css+"-close"),title:$("<h1 />").addClass(jnp._css+"-title"),message:$("<p />").addClass(jnp._css+"-content").text(jnp.options.message)}};jnp.$el.prepend(jnp.$html.container);if(jnp.options.closeBtn){jnp.$html.child.close.html("&times;");jnp.$html.container.append(jnp.$html.child.close)}if(jnp.options.title!=null&&jnp.options.title!=""){jnp.$html.child.title.append(jnp.options.title)}else{jnp.$html.child.title.hide()}jnp.$html.container.append(jnp.$html.child.title);jnp.$html.container.append(jnp.$html.child.message)};var addStyles=function(){jnp.$html.container.css({background:"rgba(211, 209, 209, 0.933333)",padding:"4px 35px 4px 12px","text-shadow":"0 1px 0 rgba(255,255,255,0.5)",border:"1px solid rgba(197, 197, 197, 0.95)","-webkit-border-radius":"4px","-moz-border-radius":"4px","border-radius":"4px"});if(jnp.options.closeBtn){jnp.$html.child.close.css({position:"absolute",top:"5px",right:"5px",cursor:"pointer","font-size":"22px","line-height":"20px"})}};var render=function(){var interval=window.setInterval(function(){setEvents();jnp.$container.show("slow");window.clearInterval(interval)},jnp.options.time)};var renderLater=function(){$("#"+jnp.options.clickOn).off().on({click:function(){render()}})};return init(element,options)};$.fn.jnp=function(options){args=Array.prototype.slice.call(arguments,1);if(undefined!=$(this).data("jnp")&&undefined!=$(this).data("jnp")[options]){var jnp=$(this).data("jnp");return jnp[options].apply(this,args)}else{return this.each(function(){if(undefined==$(this).data("jnp")&&(typeof options==="object"||!options)){var jnp=new $.jnp(this,options);$(this).data("jnp",jnp)}else{$.error("Method "+options+" does not exist in jQuery.jnp")}})}}}(jQuery,window,document);